<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!-- <title>gpx view</title> -->
    <title>노선도</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no;" />
    <meta name="HandheldFriendly" content="true" /> 

    <!-- 카톡 링크에 보여지는 이미지-->
    <meta property="og:title" content="노선예상도"/>
    <meta property="og:type" content="위례삼동선예상도"/>
    <meta property="og:url" content="https://wind707.github.io/web/nav/gpxview/"/>
    <meta property="og:image" content="https://wind707.github.io/web/nav/gpxview/img/meta_logo_railroad.png"/>
    <link rel="shortcut icon" href="https://wind707.github.io/web/nav/gpxview/img/favicon.ico">

    <script src="../../docs/js/jquery-1.9.1.js"></script>
    <!-- <script type="text/javascript" src="../../docs/js/examples-base.js"></script>  -->
    <script type="text/javascript" src="../../docs/js/highlight.min.js"></script>
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=sty9e4ckef"></script>​
    <link rel="stylesheet" type="text/css" href="./css/base.css" />
    <script>
        var HOME_PATH = '../../docs';
    </script>
</head>
<body>

<!-- @category DataLayer -->

<!-- <div id="wrap" class="section"> -->
    <!-- <h2>GeoJSON 데이터 레이어 표시하기</h2> -->
    <!-- <p>GeoJSON 데이터를 지도에 표시하는 예제입니다. 이 예제는 jQuery 구문을 포함하고 있습니다.</p> -->
    <!-- <div id="map" style="width:100%;height:800px"></div> -->
    <!-- <code id="snippet" class="snippet"></code> -->
<!-- </div> -->


<style type="text/css">
    #wrap .buttons { position:absolute;top:0;left:0;z-index:1000;padding:5px; }
    #wrap .buttons .control-btn { margin:0 5px 5px 0; }

    /* 이름 */
    .infotext{position: absolute; font-size: 12px;bottom: 5px;right:3%;font-family: system; text-align:right;font-weight: bold; color: black;z-index: 10}
    
</style>
<div id="wrap" class="section">
    <div id="map" style="width:100%;height:700px;">
        <div class="buttons">
            <input id="origin" type="button" value="처음 위치로" class="control-btn" />
            <input id="singu" type="button" value="신구대역" class="control-btn" />
            <input id="poly_on" type="button" value="500m반경ON" class="control-btn" />
            <input id="poly_off" type="button" value="500m반경OFF" class="control-btn" />
            <!-- <input id="My_pos" type="button" value="현재 위치로" class="control-btn" /> -->
        </div>
    </div>
    <code id="snippet" class="snippet"></code>
</div>

<div class="wrap">
    <div id="map"></div>
        <div class="infotext">ⓒ2020 SY,Oh 21  </div>
</div>

<script>
// var map = new naver.maps.Map(document.getElementById('map'), {
//     zoom: 12,
//     mapTypeId: 'normal',
//     center: new naver.maps.LatLng(37.44321, 127.16913)
// });
var map = new naver.maps.Map(document.getElementById('map'), {
    zoom: 13,
    mapTypeId: 'normal',
    center: new naver.maps.LatLng(37.451403, 127.159311)
});

map.setOptions("tileTransition", true); //타일 fadeIn 효과 켜기

var singu = new naver.maps.LatLng(37.446673, 127.167294),
    origin =  new naver.maps.LatLng(37.451403, 127.159311);

//원위치로이동
$("#origin").on("click", function(e) {
    e.preventDefault();
    map.setZoom(13);
    map.panTo(origin);
});

//신구대이동
$("#singu").on("click", function(e) {
    e.preventDefault();
    map.setZoom(19);
    map.panTo(singu);
});

var filOpacity;
var strOpacity;
var circleRad = 500;
var ulji_circle = new naver.maps.LatLng(37.459997, 127.165766);
var namhan_circle = new naver.maps.LatLng(37.452569, 127.160238);
var singu_circle = new naver.maps.LatLng(37.446681, 127.167301);
var bogun_circle = new naver.maps.LatLng(37.442331, 127.168867);


//도형그리기  판단하여 그리거나 안그리거나 (한번만 그리기 위하여)
$("#poly_on").on("click", function (e) {

    if (map.getOptions("tileTransition")) {
        map.setOptions("tileTransition", false); //타일 fadeIn 효과 끄기

        $(this).removeClass("control-on");
    } else {
        map.setOptions("tileTransition", true); //타일 fadeIn 효과 켜기
        $(this).addClass("control-on");
    }

});

if (1 > 18){
    var filOpacity = 0.03;
    var strOpacity = 0.3;
    }
    else{
    var filOpacity = 0.0;
    var strOpacity = 0.0;
    };

drawCircle();

// window.alert("getZoom() " + getZoom() +
//         "\n"
//         );

function drawCircle(){
//써클 을지대학교
var circle = new naver.maps.Circle({
        map: map,
        center: ulji_circle,
        radius: circleRad,
        fillColor: 'red',
        fillOpacity: filOpacity,
        strokeOpacity : strOpacity
    });  

//써클 남한산성역
var circle = new naver.maps.Circle({
        map: map,
        center: namhan_circle,
        radius: circleRad,
        fillColor: 'red',
        fillOpacity: filOpacity,
        strokeOpacity : strOpacity
    });       

//써클 신구대
        var circle = new naver.maps.Circle({
        map: map,
        center: singu_circle,
        radius: circleRad,
        fillColor: 'red',
        fillOpacity: filOpacity,
        strokeOpacity : strOpacity
    });

//써클 보건소
var circle = new naver.maps.Circle({
        map: map,
        center: bogun_circle,
        radius: circleRad,
        fillColor: 'red',
        fillOpacity: filOpacity,
        strokeOpacity : strOpacity
    });    
};

//도형지우기
$("#poly_off").on("click", function(e) {
    e.preventDefault();

    destroy();
});



//경로 그리기
$.ajax({
    url: './data/weire.geojson',
    dataType: 'json',
    success: startDataLayer
});

function startDataLayer(geojson) {
    map.data.addGeoJson(geojson);

    map.data.setStyle(function(feature) {
        var color = 'red';

        if (feature.getProperty('isColorful')) {
            color = feature.getProperty('color');
        }

        return {
            fillColor: color,
            strokeColor: color,
            strokeWeight: 2,
            icon: null
        };
    });

    map.data.addListener('click', function(e) {
        e.feature.setProperty('isColorful', true);
    });

    map.data.addListener('dblclick', function(e) {
        var bounds = e.feature.getBounds();

        if (bounds) {
            map.panToBounds(bounds);
        }
    });

    map.data.addListener('mouseover', function(e) {
        map.data.overrideStyle(e.feature, {
            strokeWeight: 8,
            icon: './img/pin_spot.png'
        });
    });

    map.data.addListener('mouseout', function(e) {
        map.data.revertStyle();
    });
}
//경로 그리기끝-------



</script>

</body>
</html>